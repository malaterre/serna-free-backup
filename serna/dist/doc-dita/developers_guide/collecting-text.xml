<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd" []>
<topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="csl-collecting-text">
  <title>Collecting text</title>
  <body id="body">
    <section>
      <p>The <codeph>csl:collect-text</codeph> instruction appends   text collected from several nodes to ContentMap item generated by parent <codeph>csl:template</codeph>. </p>
      <p>Text collection is done by  traversing the  source document subtree from current node, and concatenated content of all text nodes. Traversing is done in document order.</p>
      <codeblock>&lt;csl:collect-text select=&quot;xpath-expr&quot;
                  max-length=&quot;50&quot;/&gt;</codeblock>
      <ul>
        <li>
          <p>The optional <codeph>select</codeph> attribute specifies XPath expression    returning node-set  to collect text from.           Default value is <codeph>&quot;*&quot;</codeph>.</p>
        </li>
        <li>
          <p>The optional <codeph>first-node-only</codeph> attribute specifies that text should be collected only from the first node of node-set, and only if this first node is a text node. This attribute can take &quot;yes&quot; and &quot;no&quot; values (default is &quot;no&quot;).</p>
        </li>
        <li>
          <p>Text collection stops when content exceeds the given limit. The optional <codeph>max-length</codeph> attribute   specifies maximum length of the string which is collected from  descendant text nodes. Default value is <codeph>&quot;50&quot;</codeph>.</p>
        </li>
      </ul>
    </section>
  </body>
</topic>
